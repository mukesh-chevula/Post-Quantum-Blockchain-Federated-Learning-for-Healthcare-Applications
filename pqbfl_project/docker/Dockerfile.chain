FROM node:18-alpine

ENV HARDHAT_DISABLE_TELEMETRY=1 \
    CI=1

WORKDIR /workspace/chain

# Install deps (cached layer)
COPY chain/package.json chain/package-lock.json ./
RUN npm ci

# Chain source is bind-mounted at runtime.
EXPOSE 8545

CMD ["npx", "hardhat", "node", "--hostname", "0.0.0.0", "--port", "8545"]
